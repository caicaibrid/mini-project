<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>column</title>
    <style type="text/css">
        *{
            padding: 0;
            margin: 0;
            border: 0;
        }
        div{
            column-gap: 1px;
            column-rule: 3px dotted #ff0000;
            columns: 100px 3;
        }
        h1{
            column-span: all;
        }
    </style>
</head>
<body>
    <div>
        <h1>html5 postMessage解决跨域、跨窗口消息传递</h1>
        一些麻烦事儿

        平时做web开发的时候关于消息传递，除了客户端与服务器传值还有几个经常会遇到的问题

        1.页面和其打开的新窗口的数据传递

        2.多窗口之间消息传递

        3.页面与嵌套的iframe消息传递

        4.上面三个问题的跨域数据传递

        postMessage()

        这些问题都有一些解决办法，但html5引入的message的API可以更方便、有效、安全的解决这些难题。postMessage()方法允许来自不同源的脚本采用异步方式进行有限的通信，可以实现跨文本档、多窗口、跨域消息传递。

        postMessage(data,origin)方法接受两个参数

        1.data:要传递的数据，html5规范中提到该参数可以是JavaScript的任意基本类型或可复制的对象，然而并不是所有浏览器都做到了这点儿，部分浏览器只能处理字符串参数，所以我们在传递参数的时候需要使用JSON.stringify()方法对对象参数序列化，在低版本IE中引用json2.js可以实现类似效果。

        2.origin：字符串参数，指明目标窗口的源，协议+主机+端口号[+URL]，URL会被忽略，所以可以不写，这个参数是为了安全考虑，postMessage()方法只会将message传递给指定窗口，当然如果愿意也可以建参数设置为"*"，这样可以传递给任意窗口，如果要指定和当前窗口同源的话设置为"/"。
    </div>
</body>
</html>